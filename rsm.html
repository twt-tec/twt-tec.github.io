<body>
<h2>TWT_TEC Random_shuffle Master!</h2>
<input id="mes" value="TWTAKIOI" placeholder="在此输入您心仪的字符串"><br>
<textarea id="inp" rows="40" cols="80">
</textarea>
<textarea id="res" rows="40" cols="80">
</textarea>

<script>
function randomsort(a, b) { return Math.random()>.5 ? -1 : 1; }
function con() {
	var text = document.getElementById("inp"), mess = document.getElementById("mes");
	var code = text.value, mix = mess.value;
	var a = code.split("\n"), num = new Array();
	a.forEach((item,index)=>{
		  if(!item){
			  a.splice(index,1);
		  }
	})
	var twt = document.getElementById("res");
	twt.innerHTML = "";
	var p = 0;
	for (var i = 0; i < a.length; i++) {
		if (a[i][0] != "#") { p = i+1; break; }
		twt.innerHTML += a[i]+'\n';
	}
	a.splice(0, p-1);
	for (var i = 0; i < a.length; i++) num[i] = i;
	num.sort(randomsort);
	for (var i = 0; i < a.length; i++) {
		a[i] = a[i].replace(/\t/g, "");
		a[i] = "#define " + mix + num[i].toString() + "TWT_TEC " + a[i];
	}
	a.sort(randomsort);
	for (var i = 0; i < a.length; i++) twt.innerHTML += a[i] + '\n';
	for (var i = 0; i < a.length; i++) 
		twt.innerHTML += mix + num[i].toString() + "TWT_TEC\n";
}
</script>
<input type="button" onclick="con()" value="Random_Shullfle!">

</body>